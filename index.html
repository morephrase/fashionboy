<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ISB Store</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { padding-top: 80px; }
        .product-card img { width: 100%; height: 250px; object-fit: cover; }
        .out-of-stock {
            position: absolute;
            top: 10px;
            left: 10px;
            background: red;
            color: white;
            padding: 3px 8px;
            font-size: 12px;
            border-radius: 4px;
        }
        /* Cart Panel */
        #cart-panel {
            position: fixed;
            top: 0;
            right: -350px;
            width: 350px;
            height: 100%;
            background: #fff;
            box-shadow: -2px 0 5px rgba(0,0,0,0.2);
            transition: right 0.3s ease;
            z-index: 1050;
            padding: 20px;
            overflow-y: auto;
        }
        #cart-panel.open { right: 0; }
        /* Checkout Popup */
        #checkout-popup {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        #checkout-popup .popup-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
        }
        .close-btn { cursor: pointer; float: right; font-size: 20px; }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">ISB Store</a>
        <div class="dropdown">
            <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
                Categories
            </button>
            <ul class="dropdown-menu" id="category-menu"></ul>
        </div>
        <button id="cart-btn" class="btn btn-warning ms-auto">
            Cart (<span id="cart-count">0</span>)
        </button>
    </div>
</nav>

<!-- Product Grid -->
<div class="container mt-4">
    <div class="row" id="product-grid"></div>
</div>

<!-- Cart Panel -->
<div id="cart-panel">
    <h5>Shopping Cart</h5>
    <button id="close-cart" class="btn btn-sm btn-secondary mb-2">Close</button>
    <button id="clear-cart" class="btn btn-sm btn-danger mb-2">Clear Cart</button>
    <ul id="cart-items"></ul>
    <p><strong>Total:</strong> ₦<span id="cart-total">0</span></p>
    <button id="checkout-btn" class="btn btn-success w-100">Checkout</button>
</div>

<!-- Checkout Popup -->
<div id="checkout-popup">
    <div class="popup-content">
        <span class="close-btn">&times;</span>
        <h5>Checkout</h5>
        <p><strong>Total:</strong> ₦<span id="checkout-total">0</span></p>
        <input type="text" id="delivery-address" class="form-control mb-2" placeholder="Delivery Address" required>
        <input type="email" id="delivery-email" class="form-control mb-2" placeholder="Email" required>
        <div class="alert alert-info mt-2">
            <strong>Pay to:</strong><br>
            Okoye – OPay<br>
            Account Number: <strong>8089721265</strong>
        </div>
        <div class="text-center">
            <img src="images/qr-placeholder.png" alt="QR Code" style="max-width:150px;">
        </div>
        <button id="confirm-checkout" class="btn btn-primary w-100 mt-3">Confirm Payment</button>
    </div>
</div>

<script>
// === IMAGE FILENAMES FROM YOUR FOLDER ===
const imageList = [
"082A5079-scaled-300x300.jpg","082A5146-scaled-300x300.jpg","082A5314-scaled-300x300.jpg",
"082A9224-scaled-300x300.jpg","082A9246-scaled-300x300.jpg","082A9255-scaled-300x300.jpg",
"082A9391-scaled-300x300.jpg","DSC02480-300x300.jpg","IMG_0046-300x300.jpg",
"IMG_0133-300x300.jpg","IMG_0134-300x300.jpg","IMG_8642-300x300.jpg","IMG_9506-300x300.jpg",
"isb-air-slideIMG_3807-300x300.jpg","isb-beanie-blue-300x300.jpg","isb-blue-beanie-300x300.jpg",
"isb-edd-scaled-300x300.jpg","ISB-Feel-Good-Tshirt-Black-300x300.jpg","ISB-Feel-Good-Tshirt-White-300x300.jpg",
"ISB-Gov-300x300.jpg","isb-jean-wide-1-300x300.jpg","ISB-O-scaled-300x300.jpg","ISB-Original-Custom-Jean-300x300.jpg",
"ISB-Pa-scaled-300x300.jpg","isb-s-scaled-300x300.jpg","ISB-Slide-BlackIMG_1490-300x300.jpg",
"isb-swe-scaled-300x300.jpg","ISB-Sweatshirt-Black--scaled-300x300.jpg","ISB-Sweatshirt-Grey-scaled-300x300.jpg",
"ISB-Sweatshirt-Neon-front--scaled-300x300.jpg","ISB-Trackpants-scaled-300x300.jpg","ISB-VEST-scaled-300x300.jpg",
"ISB-x-evidence-300x300.jpg","cropped-isb-logo-official--111x53.png","disb-s-300x300.png","img_0215-300x300.png",
"img_0228-300x300.png","img_0231-2-300x300.png","img_0239-1-300x300.png","img_0983-300x300.png","img_2269-300x300.png",
"img_2271-300x300.png","img_2273-300x300.png","isb-5-panel-cap-blue-front-300x300.png",
"isb-banana-underwear-black-copy-300x300.png","isb-banana-underwear-blue-300x300.png",
"isb-banana-underwear-green-copy-300x300.png","isb-banana-underwear-orange-copy-300x300.png",
"isb-beanie-600x682-copy-300x300.png","isb-beanie-black-copy-300x300.png","isb-beanie-black3-300x300.png",
"ISB-Beige-Shirt-300x300.png","ISB-BLUE-HOODIE-F-AND-B-300x300.png","isb-boxers-short-300x300.png",
"isb-buttoned-jacket-FRONT-AND-BACK-300x300.png","ISB-Cap-300x300.png","ISB-Cap-blue-300x300.png","ISB-Caps-300x300.png",
"ISB-combo-300x300.png","isb-da-1-300x300.png","ISB-Daess-300x300.png","ISB-DDa-300x300.png","isb-do-300x300.png",
"isb-ed-300x300.png","ISB-Female-Cropped-Vest-300x300.png","ISB-Female-Cropped-Vest-Black-white-300x300.png",
"isb-Gem-shirt-22-300x300.png","ISB-greeen-white-300x300.png","ISB-Green-300x300.png","ISB-GREEN-ROUND-NECK-300x300.png",
"isb-jog-300x300.png","ISB-Joggers-Black-300x300.png","isb-joggers.png","isb-jortss-brown-300x300.png",
"isb-kp-.png","ISB-Longsleeve-Green-and-white-300x300.png","ISB-Longsleeve-pattern-shirt-300x300.png",
"ISB-Longsleeve-Yellow-blue-300x300.png","ISB-Lost-Cart-300x300.png","isb-newsboy-copy-300x300.png",
"isb-newsboyblack1-copy-300x300.png","isb-newsboygreen12-copy-300x300.png","isb-pantt-300x300.png",
"ISB-purple-tracksuit-FRONT-AND-BACK-300x300.png","ISB-Shirt-1--300x300.png","ISB-Shirt-Green-300x300.png",
"isb-sock-scaled-1-copy-300x300.png","isb-straight-baggy-denim-FRONT-AND-BACK-org-300x300.png",
"isb-stripped-short-sleve-front-300x300.png","ISB-Tank-top-black-300x300.png","ISB-Tank-Top-Blue-300x300.png",
"ISB-Tank-Top-White-300x300.png","isb-tank-top-white-copy-300x300.png","isb-top-tank-copy-300x300.png",
"ISB-Tote-300x300.png","ISB-Tote-Bag-Beige--300x300.png","isb-track-pant-copy-300x300.png",
"isb-track-suit-beige-org-300x300.png","isb-track-suit-black-and-beige-300x300.png",
"isb-track-suit-black-and-red-org-300x300.png","isb-track-suit-blue-org-300x300.png","ISB-tshirt-300x300.png",
"isb-tshirt-org-front-and-back-scaled-300x300.png","isb-tshirt-shirt-org-front-and-back-300x300.png",
"ISB-tshitt-300x300.png","ISB-under-wear-black-300x300.png","ISB-White-Shirt-1-300x300.png",
"ISB-X-CLUB-TSHIRT-WHITE-300x300.png","ISB-X-SAVAGE-c-300x300.png","ISB-X-SAVAGE-COU-300x300.png","isbcap-300x300.png",
"isblogo.png","isbnd-300x300.png","isbnd2-300x300.png","isbnd2.png","isbx.png","jort-ash-isb-copy-300x300.png",
"Longsleeve-Orange-300x300.png","photo-output-300x300.png","Screenshot-2023-09-26-at-21.37.25-300x300.png",
"Screenshot-2025-06-13-at-19.40.41-300x300.png","Screenshot-2025-06-13-at-21.43.34-300x300.png",
"Screenshot-2025-06-13-at-21.44.03-300x300.png","Screenshot-2025-06-13-at-23.21.45-300x300.png",
"Screenshot-2025-06-14-at-12.12.25-300x300.png","website-image.png"
];

// === CATEGORY DETECTION ===
function getCategory(filename) {
    const name = filename.toLowerCase();
    if (name.includes("hoodie")) return "Hoodies";
    if (name.includes("cap")) return "Caps";
    if (name.includes("beanie")) return "Beanies";
    if (name.includes("jogger")) return "Joggers";
    if (name.includes("shirt") || name.includes("tshirt")) return "Shirts";
    if (name.includes("tracksuit") || name.includes("track")) return "Tracksuits";
    if (name.includes("tank")) return "Tank Tops";
    if (name.includes("short") || name.includes("jort")) return "Shorts";
    if (name.includes("vest")) return "Vests";
    if (name.includes("bag")) return "Bags";
    if (name.includes("under") || name.includes("boxer")) return "Underwear";
    return "Others";
}

// === GENERATE PRODUCT DATA ===
const productData = imageList.map(img => ({
    name: img.replace(/[-_]/g, ' ').replace(/\.(jpg|png)$/i, ''),
    price: Math.floor(Math.random() * 200000) + 50000,
    stock: Math.random() > 0.07, // ~7% out of stock
    category: getCategory(img),
    image: img
}));

// === RENDER CATEGORIES ===
function renderCategories() {
    const categories = [...new Set(productData.map(p => p.category))];
    const menu = document.getElementById("category-menu");
    menu.innerHTML = `<li><a href="#" class="dropdown-item" data-category="All">All</a></li>`;
    categories.forEach(cat => {
        menu.innerHTML += `<li><a href="#" class="dropdown-item" data-category="${cat}">${cat}</a></li>`;
    });
    document.querySelectorAll("#category-menu a").forEach(link => {
        link.addEventListener("click", e => {
            e.preventDefault();
            const cat = link.dataset.category;
            renderProducts(cat === "All" ? productData : productData.filter(p => p.category === cat));
        });
    });
}

// === RENDER PRODUCTS ===
function renderProducts(products) {
    const grid = document.getElementById('product-grid');
    grid.innerHTML = "";
    products.forEach(p => {
        const imgSrc = `images/${p.image}`;
        const col = document.createElement('div');
        col.className = 'col-md-4';
        col.innerHTML = `
            <div class="product-card position-relative">
                ${!p.stock ? `<span class="out-of-stock">Out of stock</span>` : ''}
                <img src="${imgSrc}" alt="${p.name}">
                <div class="p-3">
                    <h6>${p.name}</h6>
                    <p>₦${p.price.toLocaleString()}</p>
                    ${p.stock ? `<button class="btn btn-dark w-100 add-to-cart" data-name="${p.name}" data-price="${p.price}">Add to Cart</button>` : ''}
                </div>
            </div>
        `;
        grid.appendChild(col);
    });
    attachCartEvents();
}

// === CART ===
let cart = [];
function attachCartEvents() {
    document.querySelectorAll('.add-to-cart').forEach(btn => {
        btn.addEventListener('click', () => {
            const name = btn.dataset.name;
            const price = parseInt(btn.dataset.price);
            cart.push({ name, price });
            updateCart();
        });
    });
}
function updateCart() {
    const list = document.getElementById('cart-items');
    const total = document.getElementById('cart-total');
    const count = document.getElementById('cart-count');
    list.innerHTML = '';
    let sum = 0;
    cart.forEach(item => {
        list.innerHTML += `<li>${item.name} - ₦${item.price.toLocaleString()}</li>`;
        sum += item.price;
    });
    total.textContent = sum.toLocaleString();
    count.textContent = cart.length;
    document.getElementById('checkout-total').textContent = sum.toLocaleString();
}

// === CART PANEL TOGGLE ===
document.getElementById('cart-btn').addEventListener('click', () => {
    document.getElementById('cart-panel').classList.toggle('open');
});
document.getElementById('close-cart').addEventListener('click', () => {
    document.getElementById('cart-panel').classList.remove('open');
});
document.getElementById('clear-cart').addEventListener('click', () => {
    cart = [];
    updateCart();
});

// === CHECKOUT POPUP ===
document.getElementById('checkout-btn').addEventListener('click', () => {
    document.getElementById('checkout-popup').style.display = 'flex';
});
document.querySelector('.close-btn').addEventListener('click', () => {
    document.getElementById('checkout-popup').style.display = 'none';
});

// === CONFIRM CHECKOUT ===
document.getElementById('confirm-checkout').addEventListener('click', () => {
    const address = document.getElementById('delivery-address').value.trim();
    const email = document.getElementById('delivery-email').value.trim();
    if (!address || !email) {
        alert("Please fill in your address and email before confirming payment.");
        return;
    }
    alert("Thank you for your order! Please make payment to Okoye – OPay (8089721265).");
});

renderCategories();
renderProducts(productData);
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
